(()=>{var e={};e.id=506,e.ids=[506],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},6005:e=>{"use strict";e.exports=require("node:crypto")},2871:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>c});var s=a(3003),r=a(4293),n=a(6550),i=a.n(n),l=a(6979),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(t,d);let c=["",{children:["rankings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7119)),"/Users/zhangsiyi/Desktop/TokenTown/web/app/rankings/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,6877)),"/Users/zhangsiyi/Desktop/TokenTown/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,2075,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/Users/zhangsiyi/Desktop/TokenTown/web/app/rankings/page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/rankings/page",pathname:"/rankings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7548:(e,t,a)=>{Promise.resolve().then(a.bind(a,8143)),Promise.resolve().then(a.t.bind(a,2481,23)),Promise.resolve().then(a.t.bind(a,9404,23))},1930:(e,t,a)=>{Promise.resolve().then(a.bind(a,2565))},1552:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,2639,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23)),Promise.resolve().then(a.t.bind(a,2816,23))},8143:(e,t,a)=>{"use strict";a.d(t,{Providers:()=>c});var s=a(8819),r=a(2852),n=a(4976),i=a(9125),l=a(6156);a(4290);let d=new r.S;function c({children:e}){return(0,s.jsx)(n.aH,{client:d,children:(0,s.jsx)(i.MS,{networks:l.$,defaultNetwork:l.L5,children:(0,s.jsx)(i.nS,{children:e})})})}},2565:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(8819),r=a(7266),n=a(434),i=a(9125);let l=(0,a(2881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var d=a(4061),c=a(8019),o=a(2643),u=a(3156),m=a(3981);function p(){let[e,t]=(0,r.useState)(!0),[a,p]=(0,r.useState)(0),[x,f]=(0,r.useState)([]),v=(0,i.t)(),[h,b]=(0,r.useState)("");return(0,u.J4)().then(e=>{p(e??0)}),(0,s.jsxs)("div",{className:"min-h-screen w-full bg-gradient-to-br from-[#1a1a2e] to-[#16213e] p-4",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between rounded-lg bg-black/30 p-3 backdrop-blur-sm",children:[(0,s.jsxs)(n.default,{href:"/",className:"flex items-center gap-2 text-white",children:[(0,s.jsx)(l,{size:18}),(0,s.jsx)("span",{className:"font-medium",children:"返回"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.Z,{size:18,className:"text-blue-400"}),(0,s.jsx)("span",{className:"text-sm font-medium text-white",children:"限制名额: 5名"})]})]}),(0,s.jsxs)("div",{className:"mx-auto max-w-2xl",children:[(0,s.jsxs)("div",{className:"mb-6 text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white",children:"TokenTown 排行榜"}),(0,s.jsxs)("p",{className:"mt-1 text-gray-300",children:["当前金库总额:",a," SUI"]})]}),(0,s.jsxs)(o.Zb,{className:"w-full bg-black/20 p-4 mt-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white mb-4 text-center",children:"今日排行"}),e?(0,s.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,s.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-blue-500 border-t-transparent"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mb-4 rounded-lg bg-blue-900/20 p-3",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.Z,{size:16,className:"text-blue-400"}),(0,s.jsx)("span",{className:"text-sm text-gray-300",children:"仅限前5名玩家参与游戏"})]})})}),(0,s.jsxs)("div",{className:"rounded-lg bg-black/40 p-4",children:[(0,s.jsxs)("div",{className:"mb-3 grid grid-cols-12 text-xs font-medium text-white",children:[(0,s.jsx)("div",{className:"col-span-1",children:"排名"}),(0,s.jsx)("div",{className:"col-span-4",children:"玩家"}),(0,s.jsx)("div",{className:"col-span-3",children:"卡牌数"})]}),(0,s.jsx)("div",{className:"space-y-2",children:x.map((e,t)=>(0,s.jsxs)("div",{className:`grid grid-cols-12 items-center rounded py-2 text-sm ${v&&e.player===v.address?"bg-blue-900/30":""}`,children:[(0,s.jsx)("div",{className:"col-span-1 font-bold text-white",children:t+1}),(0,s.jsxs)("div",{className:"col-span-4 flex items-center gap-1 text-white",children:[(0,m.T)(e.player),h&&e.player===h&&(0,s.jsx)("span",{className:"rounded bg-purple-500/30 px-1 py-0.5 text-xs text-purple-300",children:"首位提交"})]}),(0,s.jsxs)("div",{className:"col-span-3 text-white",children:[e.card_count,"张"]})]},e.player+"-"+t))})]})]})]})]})]})}function x(){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:"加载中..."}),children:(0,s.jsx)(p,{})})}},2643:(e,t,a)=>{"use strict";a.d(t,{Zb:()=>i});var s=a(8819),r=a(7266),n=a(7863);let i=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card",r.forwardRef(({className:e,...t},a)=>(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t})).displayName="CardHeader",r.forwardRef(({className:e,...t},a)=>(0,s.jsx)("div",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t})).displayName="CardTitle",r.forwardRef(({className:e,...t},a)=>(0,s.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription",r.forwardRef(({className:e,...t},a)=>(0,s.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",e),...t})).displayName="CardContent",r.forwardRef(({className:e,...t},a)=>(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},6156:(e,t,a)=>{"use strict";a.d(t,{Hi:()=>u,L5:()=>d,$:()=>c,vd:()=>m});var s=a(387),r=a(3437),n=a(9125),i=a(1878);let l={testnet:{Package:"0xaaa6f50dee638bb6056f137fe2336f1dc03b0fc5a38f2ddce014b72bfaea89d7",Vault:"0xecc00b51af1cc0da48d54488428502bf80a33df18182352fb4e0d64617448e89"},mainnet:{Package:"0x1111111111111111111111111111111111111111"}},d="testnet",{networkConfig:c,useNetworkVariables:o}=(0,n.mB)({testnet:{url:(0,s.I)("testnet"),variables:l.testnet},mainnet:{url:(0,s.I)("mainnet"),variables:l.mainnet}});function u(e){return t=>e(new i.Y,c[d].variables,t)}let m=new r.u({url:c[d].url})},3156:(e,t,a)=>{"use strict";a.d(t,{J4:()=>i,OQ:()=>u,RS:()=>o,XH:()=>l,cv:()=>d,zB:()=>c});var s=a(6156),r=a(8295),n=a.n(r);let i=async()=>{let e=`${s.$.testnet.variables.Package}::card::PaymentEvent`,t=n()().startOf("day").unix(),a=n()().endOf("day").unix();for(let r of(await s.vd.queryEvents({query:{MoveEventType:e},limit:1,order:"descending"})).data){let e=Math.floor(Number(r.timestampMs)/1e3);if(e>=t&&e<=a)return r.parsedJson.amount/1e9}return 0},l=async()=>{let e=`${s.$.testnet.variables.Package}::card::DailyLeaderboardEvent`,t=n()().startOf("day").unix(),a=n()().endOf("day").unix(),r=await s.vd.queryEvents({query:{MoveEventType:e},limit:100}),i=new Map;for(let e of r.data){let s=e.parsedJson,r=Math.floor(Number(e.timestampMs)/1e3);if(r>=t&&r<=a){let e=i.get(s.player);(!e||BigInt(s.card_count)>BigInt(e.card_count))&&i.set(s.player,s)}}return Array.from(i.values()).sort((e,t)=>Number(BigInt(t.card_count)-BigInt(e.card_count)))},d=async()=>{let e=`${s.$.testnet.variables.Package}::card::FirstEvent`,t=n()().startOf("day").unix(),a=n()().endOf("day").unix();for(let r of(await s.vd.queryEvents({query:{MoveEventType:e},limit:1,order:"descending"})).data){let e=Math.floor(Number(r.timestampMs)/1e3);if(e>=t&&e<=a)return r.parsedJson.player}return null},c=async()=>{let e=`${s.$.testnet.variables.Package}::card::IncentiveSubmitEvent`,t=n()().startOf("day").unix(),a=n()().endOf("day").unix();for(let r of(await s.vd.queryEvents({query:{MoveEventType:e},limit:1,order:"descending"})).data){let e=Math.floor(Number(r.timestampMs)/1e3);if(e>=t&&e<=a)return r.parsedJson}return null},o=(0,s.Hi)((e,t,a)=>{if(a.wallet)e.moveCall({target:`${t.Package}::card::payment`,arguments:[e.object(a.wallet),e.object(t.Vault)]});else{let[a]=e.splitCoins(e.gas,[e.pure.u64(2e8)]);e.moveCall({package:t.Package,module:"card",function:"payment",arguments:[a,e.object(t.Vault)]})}return e}),u=(0,s.Hi)((e,t,a)=>(e.moveCall({package:t.Package,module:"card",function:"submit",arguments:[e.pure.u64(Number(a.cardCount)),e.pure.u64(Number(a.time)),e.object(t.Vault)]}),e))},7863:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(1135),r=a(1009);function n(...e){return(0,r.m6)((0,s.W)(e))}},4061:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(2881).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},6877:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>u,metadata:()=>m});var r=a(9351);a(7272);var n=a(9177),i=a.n(n),l=a(8442),d=a(4894),c=a(5580),o=e([l]);l=(o.then?(await o)():o)[0];let m={title:"TokenTown - 区块链卡牌堆叠游戏",description:"TokenTown 是一款基于区块链的卡牌堆叠游戏，每日奖池等你来赢！"};function u({children:e}){return(0,r.jsx)("html",{lang:"en",children:(0,r.jsxs)("body",{className:`${i().className} antialiased`,children:[(0,r.jsx)("div",{className:"fixed top-14 left-10 z-50",children:(0,r.jsx)(c.default,{href:"/",children:(0,r.jsx)(d.default,{src:"/logo/logo.png",alt:"TokenTown Logo",width:100,height:100,className:"rounded-full shadow-lg"})})}),(0,r.jsx)(l.Providers,{children:e})]})})}s()}catch(e){s(e)}})},8442:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{Providers:()=>e});var r=a(1851);let e=(await (0,r.createProxy)(String.raw`/Users/zhangsiyi/Desktop/TokenTown/web/app/providers.tsx`)).Providers;s()}catch(e){s(e)}},1)},7119:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>e});var r=a(1851);let e=(await (0,r.createProxy)(String.raw`/Users/zhangsiyi/Desktop/TokenTown/web/app/rankings/page.tsx`)).default;s()}catch(e){s(e)}},1)},7481:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(771);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},7272:()=>{},3981:(e,t,a)=>{"use strict";function s(e){if(e.length<=6)return e;let t=e.startsWith("0x")?2:0;return`0x${e.slice(t,t+4)}\u2026${e.slice(-4)}`}a.d(t,{T:()=>s})}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[147,961,879],()=>a(2871));module.exports=s})();