(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{380:(e,t,s)=>{Promise.resolve().then(s.bind(s,7923))},7923:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>L});var a=s(7437),l=s(2265),r=s(8479),n=s(7440),i=s(4446),d=s(4323),c=s(1902);function o(e){let{cards:t,selectedType:s,isLocked:l}=e,{setNodeRef:o}=(0,r.Zj)({id:"target-stack",disabled:l});return(0,a.jsxs)("div",{ref:o,className:(0,n.cn)("flex h-40 items-center justify-center rounded-xl border-2 border-dashed transition-all relative overflow-hidden group",s?"border-green-500/50 bg-gradient-to-br from-green-900/20 to-emerald-900/10":"border-yellow-500/50 bg-gradient-to-br from-yellow-900/20 to-amber-900/10",l&&"border-gray-500/50 bg-gradient-to-br from-gray-900/20 to-gray-800/10"),children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm z-0"}),(0,a.jsx)("div",{className:(0,n.cn)("absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500",s?"bg-green-500/5":"bg-yellow-500/5")}),0===t.length?(0,a.jsx)("div",{className:"text-center text-gray-400 z-10 flex flex-col items-center",children:l?(0,a.jsx)("span",{className:"bg-gray-800/80 px-3 py-1 rounded-full text-sm backdrop-blur-sm",children:"已锁定"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{className:"h-8 w-8 mb-2 text-yellow-500/70"}),(0,a.jsx)("span",{className:"bg-black/50 px-3 py-1 rounded-full text-sm backdrop-blur-sm",children:"拖拽卡牌到这里"})]})}):(0,a.jsxs)("div",{className:"relative flex h-full w-full items-center justify-center",children:[(0,a.jsx)("div",{className:"relative h-full flex items-center",children:(0,a.jsx)(i.M,{children:t.map((e,t)=>(0,a.jsx)(d.E.div,{initial:{scale:0,y:-20},animate:{scale:1,y:0,x:"".concat(15*t,"px"),zIndex:t,transition:{type:"spring",damping:12,stiffness:200}},exit:{scale:0,y:-20},className:"absolute left-0",style:{zIndex:t},children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-full blur-sm"}),(0,a.jsx)("img",{src:e.image||"/placeholder.svg",alt:e.type,className:"h-20 w-20 rounded-full border-2 border-white/30 bg-black/60 p-1 shadow-lg"})]})},e.id))})}),(0,a.jsx)("div",{className:"absolute right-4 bottom-4 z-20",children:(0,a.jsxs)("span",{className:"flex items-center gap-1 rounded-full bg-black/70 px-3 py-1 text-sm font-medium text-white shadow-lg border border-white/10",children:[(0,a.jsx)("span",{className:"text-green-400",children:t.length})," 张"]})}),s&&(0,a.jsx)("div",{className:"absolute left-4 bottom-4 z-20",children:(0,a.jsxs)("span",{className:"flex items-center gap-1 rounded-full bg-black/70 px-2 py-0.5 text-xs font-medium text-white shadow-lg border border-white/10",children:[(0,a.jsx)("img",{src:"/".concat(s).concat("wal"===s||"cetus"===s||"blue"===s||"scallop"===s?".png":".svg"),alt:s,className:"h-8 w-8"}),s.toUpperCase()]})})]})]})}function m(e){let{card:t,index:s,total:l,isDisabled:i,sameTypeCount:c,selectedType:o,nextDifferentCard:m}=e,x=s===l-1,u=i||!x,h=5*s,g=o===t.type,f=c>=10,{attributes:b,listeners:p,setNodeRef:y,isDragging:j}=(0,r.O1)({id:t.id,disabled:u});return(0,a.jsx)(d.E.div,{ref:y,...p,...b,className:(0,n.cn)("absolute left-0 top-0 transition-all duration-150",j?"z-50 cursor-grabbing":x?"cursor-grab":"cursor-default",u&&"pointer-events-none",x&&"hover:scale-105"),style:{transform:"translateY(".concat(h,"px)"),zIndex:s,opacity:u?.7:1,willChange:"transform"},whileHover:{},animate:j?{scale:1.05}:{scale:1},children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:(0,n.cn)("absolute inset-0 rounded-full blur-md opacity-0 transition-opacity duration-150",j&&"opacity-50",g&&"bg-green-500/20 opacity-30",f&&"bg-yellow-500/20 opacity-30")}),(0,a.jsx)("img",{src:t.image||"/placeholder.svg",alt:t.type,className:(0,n.cn)("h-20 w-20 rounded-full border-2 bg-black/60 p-1 shadow-lg transition-all",j?"border-green-400 scale-110":g?"border-green-400/70":f?"border-yellow-400/70":"border-white/20",i?"border-gray-500/50":"")}),x&&c>1&&(0,a.jsx)("div",{className:(0,n.cn)("absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full text-xs font-bold text-white shadow-md",f?"bg-gradient-to-r from-green-500 to-emerald-500":g?"bg-gradient-to-r from-blue-500 to-indigo-500":"bg-gradient-to-r from-blue-400 to-purple-400"),children:c}),x&&(0,a.jsx)("div",{className:"absolute -left-1 -bottom-1 h-4 w-4 rounded-full bg-black/70 flex items-center justify-center border border-white/10",children:(0,a.jsx)("img",{src:"/".concat(t.type).concat("wal"===t.type||"cetus"===t.type||"blue"===t.type||"scallop"===t.type?".png":".svg"),alt:t.type,className:"h-2.5 w-2.5"})}),x&&m&&(0,a.jsx)("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 transform",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 rounded-full blur-sm"}),(0,a.jsx)("img",{src:m.image||"/placeholder.svg",alt:m.type,className:"h-8 w-8 rounded-full border border-white/20 bg-black/40 p-0.5"})]})})]})})}function x(e){let{slot:t,isDisabled:s,selectedType:l}=e,{setNodeRef:i,isOver:c}=(0,r.Zj)({id:t.id,disabled:s}),o={};t.cards.forEach(e=>{o[e.type]=(o[e.type]||0)+1});let x=Object.entries(o).map(e=>{let[t,s]=e;return{type:t,count:s}}).sort((e,t)=>t.count-e.count),u=e=>{let s=0;for(let a=t.cards.length-1;a>=0;a--)if(t.cards[a].type===e)s++;else break;return s};return(0,a.jsx)("div",{className:"flex flex-col items-center space-y-1",children:(0,a.jsxs)("div",{ref:i,className:(0,n.cn)("h-[300px] w-full rounded-xl bg-gradient-to-br from-yellow-900/20 to-amber-900/10 p-1 relative transition-all duration-300 border border-yellow-500/20",c&&"from-yellow-900/30 to-amber-900/20 border-yellow-500/40 shadow-lg shadow-yellow-500/10",0===t.cards.length&&"border-dashed"),children:[(0,a.jsxs)("div",{className:"relative h-[calc(100%-3rem)] w-full",children:[" ",t.cards.map((e,r)=>{let n=r===t.cards.length-1?u(e.type):1;return(0,a.jsx)(m,{card:e,index:r,total:t.cards.length,isDisabled:s,sameTypeCount:n,selectedType:l},e.id)}),0===t.cards.length&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-yellow-500/50 text-xs",children:"空卡槽"})]}),x.length>0&&(0,a.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute bottom-0 left-0 right-0 flex flex-wrap justify-center gap-1.5 p-2 bg-black/80 rounded-b-lg backdrop-blur-sm border-t border-white/10",children:x.map(e=>{let{type:t,count:s}=e;return(0,a.jsxs)("div",{className:(0,n.cn)("text-[10px] px-2 py-1 rounded-md flex items-center gap-1 transition-all",s>=10?"bg-gradient-to-r from-green-600/90 to-emerald-600/90 text-white shadow-sm shadow-green-500/20":"bg-gray-700/90 text-gray-200",l===t&&"ring-1 ring-white/50"),children:[(0,a.jsx)("img",{src:"/".concat(t).concat("wal"===t||"cetus"===t||"blue"===t||"scallop"===t?".png":".svg"),alt:t,className:"w-3.5 h-3.5"}),(0,a.jsx)("span",{className:"font-medium",children:s})]},t)})})]})})}var u=s(4697),h=s(2468),g=s(883);function f(e){let{error:t,success:s}=e,{setNodeRef:l,isOver:c}=(0,r.Zj)({id:"trash-bin"});return(0,a.jsxs)("div",{ref:l,className:(0,n.cn)("flex h-40 flex-col items-center justify-center rounded-xl border-2 border-dashed transition-all relative overflow-hidden group",t?"border-red-500 bg-gradient-to-br from-red-900/20 to-red-800/10":c?"border-yellow-500 bg-gradient-to-br from-yellow-900/30 to-amber-900/20":"border-gray-500/50 bg-gradient-to-br from-gray-800/30 to-gray-900/20",s&&"border-green-500 bg-gradient-to-br from-green-900/20 to-emerald-900/10"),children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm z-0"}),(0,a.jsx)("div",{className:(0,n.cn)("absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500",t?"bg-red-500/5":s?"bg-green-500/5":"bg-gray-500/5")}),(0,a.jsx)("div",{className:"z-10 flex flex-col items-center",children:(0,a.jsx)(i.M,{mode:"wait",children:t?(0,a.jsxs)(d.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"bg-red-500/20 p-2 rounded-full mb-2",children:(0,a.jsx)(u.Z,{size:24,className:"text-red-400"})}),(0,a.jsx)("p",{className:"text-center text-xs text-red-400 px-4 max-w-[200px]",children:t})]},"error"):s?(0,a.jsxs)(d.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"bg-green-500/20 p-2 rounded-full mb-2",children:(0,a.jsx)(h.Z,{size:24,className:"text-green-400"})}),(0,a.jsx)("p",{className:"text-center text-xs text-green-400",children:"丢弃成功!"})]},"success"):(0,a.jsxs)(d.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:(0,n.cn)("p-2 rounded-full mb-2 transition-all",c?"bg-yellow-500/20":"bg-gray-500/20","group-hover:scale-110"),children:(0,a.jsx)(g.Z,{size:24,className:(0,n.cn)("transition-colors",c?"text-yellow-400":"text-gray-400")})}),(0,a.jsxs)("p",{className:"text-center text-xs text-gray-400",children:["拖拽卡牌到此处丢弃",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-green-400 font-medium",children:"绿色标记"}),"表示可丢弃(≥10张)"]})]},"default")})})]})}var b=s(3865),p=s(5737),y=s(3852),j=s(5016),v=s(690),N=s(3907),w=s(3274),k=s(6706),E=s(994),S=s(5430),z=s(7138),Z=s(6078),T=s(837),C=s(1538);let M=(0,s(3027).j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),I=l.forwardRef((e,t)=>{let{className:s,variant:l,size:r,asChild:i=!1,...d}=e,c=i?C.g7:"button";return(0,a.jsx)(c,{className:(0,n.cn)(M({variant:l,size:r,className:s})),ref:t,...d})});I.displayName="Button";var P=s(4655),O=s(5978);let _=O.zt,B=O.fC,V=O.xz,D=l.forwardRef((e,t)=>{let{className:s,sideOffset:l=4,...r}=e;return(0,a.jsx)(O.VY,{ref:t,sideOffset:l,className:(0,n.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...r})});D.displayName=O.VY.displayName;var R=s(2231),A=s(2267);function U(e){let{tx:t,waitForTx:s=!0,options:a}=e,{mutate:r}=(0,R.YH)({execute:async e=>{let{bytes:t,signature:s}=e;return await A.vd.executeTransactionBlock({transactionBlock:t,signature:s,options:{showRawEffects:!0,...a}})}}),[n,i]=(0,l.useState)(!1);return{handleSignAndExecuteTransaction:function(){let e,a,l,n;for(var d=arguments.length,c=Array(d),o=0;o<d;o++)c[o]=arguments[o];let m=t(...c),x={beforeExecute:e=>(n=e,x),onSuccess:t=>(e=t,x),onError:e=>(a=e,x),onSettled:e=>(l=e,x),execute:async()=>{i(!0);try{let t=await (null==n?void 0:n());if(!1===t)throw Error("Validation failed in beforeExecute");await r({transaction:m},{onSuccess:async t=>{s&&await A.vd.waitForTransaction({digest:t.digest}),await (null==e?void 0:e(t))},onError:e=>{null==a||a(e)},onSettled:async e=>{await (null==l?void 0:l(e)),i(!1)}})}catch(t){let e=t instanceof Error?t:Error(String(t));null==a||a(e)}finally{i(!1)}}};return x},isLoading:n}}var q=s(5417),H=s(1240),F=s(6013);function Y(){let[e,t]=(0,l.useState)(!0),[s,r]=(0,l.useState)(0),[n,i]=(0,l.useState)([]),d=(0,R.t)(),[c,o]=(0,l.useState)("");return(0,l.useEffect)(()=>{(async()=>{try{let[e,s,a]=await Promise.all([(0,q.XH)(),(0,q.J4)(),(0,q.cv)()]);i(e),r(null!=s?s:0),o(null!=a?a:""),t(!1)}catch(e){console.error("Error fetching rankings data:",e),t(!1)}})()},[]),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"mb-4 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"TokenTown 排行榜"}),(0,a.jsxs)("p",{className:"mt-1 text-gray-300",children:["当前金库总额: ",s," SUI"]})]}),(0,a.jsxs)(F.Zb,{className:"w-full bg-black/20 p-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"今日排行"}),e?(0,a.jsx)("div",{className:"flex h-48 items-center justify-center",children:(0,a.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-blue-500 border-t-transparent"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-4 rounded-lg bg-blue-900/20 p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{size:16,className:"text-blue-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:"仅限前5名玩家参与游戏"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(H.Z,{size:16,className:"text-blue-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:"限制名额: 5名"})]})]})}),(0,a.jsxs)("div",{className:"rounded-lg bg-black/40 p-4",children:[(0,a.jsxs)("div",{className:"mb-3 grid grid-cols-12 text-xs font-medium text-white",children:[(0,a.jsx)("div",{className:"col-span-1",children:"排名"}),(0,a.jsx)("div",{className:"col-span-5",children:"玩家"}),(0,a.jsx)("div",{className:"col-span-3",children:"卡牌数"})]}),(0,a.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-1",children:n.map((e,t)=>(0,a.jsxs)("div",{className:"grid grid-cols-12 items-center rounded py-2 text-sm ".concat(d&&e.player===d.address?"bg-blue-900/30":""),children:[(0,a.jsx)("div",{className:"col-span-1 font-bold text-white",children:t+1}),(0,a.jsxs)("div",{className:"col-span-5 flex items-center gap-1 text-white",children:[(0,Z.T)(e.player),c&&e.player===c&&(0,a.jsx)("span",{className:"rounded bg-purple-500/30 px-1 py-0.5 text-xs text-purple-300",children:"首位提交"})]}),(0,a.jsxs)("div",{className:"col-span-3 text-white",children:[e.card_count,"张"]})]},e.player+"-"+t))})]})]})]})]})}function $(e){let{accountAddress:t}=e,[s,n]=(0,l.useState)("playing"),[c,m]=(0,l.useState)([]),[u,h]=(0,l.useState)([]),[g,C]=(0,l.useState)(null),[M,O]=(0,l.useState)(0),[A,H]=(0,l.useState)(!1),[F,$]=(0,l.useState)(!1),[J,L]=(0,l.useState)(!1),[K,Q]=(0,l.useState)(null),[W,X]=(0,l.useState)(!1),[G,ee]=(0,l.useState)(null),[et,es]=b.ZP.useMessage(),[ea,el]=(0,l.useState)(!1),[er,en]=(0,l.useState)(!0),ei=(0,r.Dy)((0,r.VT)(r.MA,{activationConstraint:{distance:0,tolerance:5,delay:0}}),(0,r.VT)(r.LO,{activationConstraint:{delay:0,tolerance:5}})),ed={sideEffects:(0,r.Ai)({styles:{active:{opacity:"0.5"}}})},{handleSignAndExecuteTransaction:ec}=U({tx:q.RS}),{handleSignAndExecuteTransaction:eo}=U({tx:q.OQ}),[em,ex]=(0,l.useState)(null),{data:eu,isLoading:eh,error:eg}=(0,R.YI)("getBalance",{owner:t,coinType:"0x2::sui::SUI"},{enabled:!!t,refetchInterval:3e3});(0,l.useEffect)(()=>{eg&&console.error("余额查询错误:",eg)},[t,eu,eg]);let ef=(0,l.useMemo)(()=>eu&&eu.totalBalance?Number(null==eu?void 0:eu.totalBalance)/1e9:0,[eu]),[eb,ep]=(0,l.useState)([]);(0,l.useEffect)(()=>{ey();let e=setTimeout(()=>{en(!1)},5e3);return()=>clearTimeout(e)},[]);let ey=()=>{let e=[];for(let t=0;t<7;t++)e.push({id:"slot-".concat(t),cards:[]});m(e)},ej=(e,t,s,a)=>{let l=[...c],r=l[e],n=r.cards.length-1,i=[];for(let e=n;e>=0;e--)if(r.cards[e].type===t)i.unshift(r.cards[e]);else break;l[e].cards=r.cards.slice(0,r.cards.length-i.length),"target"===s?h(e=>[...e,...i]):"slot"===s&&void 0!==a&&(l[a].cards=[...l[a].cards,...i]),m(l)},ev=e=>{for(let t of c){let s=t.cards.findIndex(t=>t.id===e);if(-1!==s)return[t.id,s]}return[null,-1]},eN=()=>{let e=["wusdc","wbtc","wal","cetus","usdt","sui","navx","deep","fdusd","ns","blue","scallop"].sort(()=>Math.random()-.5).slice(0,7);ep(e);let t=[...c];for(let s=0;s<t.length;s++){let a=Math.floor(2*Math.random())+4;for(let l=0;l<a;l++){let a=e[Math.floor(Math.random()*e.length)],r="card-".concat(s,"-").concat(l,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,15));t[s].cards.push({id:r,type:a,image:"/".concat(a).concat("wal"===a||"cetus"===a||"blue"===a||"scallop"===a?".png":".svg")})}}m(t)},ew=async e=>{if(0===u.length){b.ZP.warning("请先选择卡牌");return}let t=new Date,s=1e4*t.getFullYear()+(t.getMonth()+1)*100+t.getDate();H(!0),eo({cardCount:e,time:s}).onSuccess(async e=>{console.log("提交成功",e),b.ZP.success("提交成功！"),setTimeout(()=>{n("submitted"),H(!1)},1500),(0,q.zB)().then(e=>{ex(null!=e?e:null)})}).onError(async e=>{console.log("提交失败",e),et.error(e.message),H(!1)}).execute()},ek=(()=>{if(!G)return null;for(let e of c){let t=e.cards.find(e=>e.id===G);if(t)return t}return null})();return(0,a.jsxs)("div",{className:"relative min-h-screen w-full bg-gradient-to-br from-[#1a1a2e] to-[#16213e] p-4",children:[es,(0,a.jsx)("div",{className:"absolute inset-0 z-[-2]",children:(0,a.jsx)(P.Z,{})}),(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between rounded-lg bg-black/40 p-3 backdrop-blur-md border border-white/10 shadow-lg",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-yellow-500/20 px-3 py-1.5 rounded-full backdrop-blur-sm",children:[(0,a.jsx)(p.Z,{size:18,className:"text-yellow-400"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-white",children:[ef.toFixed(6)," SUI"]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(z.default,{href:"/",children:(0,a.jsxs)("button",{className:"flex items-center gap-1 rounded-full bg-indigo-600/80 px-3 py-1.5 text-sm font-medium text-white transition-all hover:bg-indigo-700 hover:scale-105",children:[(0,a.jsx)(y.Z,{size:16}),(0,a.jsx)("span",{children:"首页"})]})}),(0,a.jsxs)("button",{onClick:()=>L(!0),className:"flex items-center gap-1 rounded-full bg-blue-600/80 px-3 py-1.5 text-sm font-medium text-white transition-all hover:bg-blue-700 hover:scale-105",children:[(0,a.jsx)(j.Z,{size:16}),(0,a.jsx)("span",{children:"排行榜"})]}),(0,a.jsxs)("button",{onClick:()=>$(!0),className:"flex items-center gap-1 rounded-full bg-gray-600/50 px-3 py-1.5 text-sm font-medium text-white transition-all hover:bg-gray-700 hover:scale-105",children:[(0,a.jsx)(v.Z,{size:16}),(0,a.jsx)("span",{children:"规则"})]})]})]}),"playing"===s&&(0,a.jsxs)(r.LB,{sensors:ei,collisionDetection:r.j2,onDragStart:e=>{ee(e.active.id)},onDragEnd:e=>{let{active:t,over:s}=e;if(ee(null),!s)return;let[a,l]=ev(t.id);if(!a||-1===l)return;let r=c.findIndex(e=>e.id===a);if(-1===r)return;let n=c[r].cards[l];if(!(l!==c[r].cards.length-1)){if("trash-bin"===s.id){let e=c[r].cards.filter(e=>e.type===n.type).length;if(e>=10){let e=[...c];e[r].cards=e[r].cards.filter(e=>e.type!==n.type),m(e),X(!0),setTimeout(()=>X(!1),2e3)}else Q("需要至少10张相同类型的卡牌才能丢弃（当前卡槽: ".concat(e,"张）")),setTimeout(()=>Q(null),3e3);return}if("target-stack"===s.id)null===g?(C(n.type),ej(r,n.type,"target")):n.type===g&&ej(r,n.type,"target");else if("string"==typeof s.id&&s.id.startsWith("slot-")){let e=c.findIndex(e=>e.id===s.id);if(-1===e||e===r||c[e].cards.length>0&&c[e].cards[c[e].cards.length-1].type!==n.type)return;ej(r,n.type,"slot",e)}}},autoScroll:{enabled:!0,threshold:{x:0,y:0}},children:[(0,a.jsxs)("div",{className:"mx-auto max-w-6xl space-y-6",children:[(0,a.jsx)(i.M,{children:er&&(0,a.jsx)(d.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-gradient-to-r from-blue-500/30 to-purple-500/30 rounded-lg p-3 backdrop-blur-md border border-white/10 shadow-lg text-center",children:(0,a.jsxs)("p",{className:"text-white",children:[(0,a.jsx)(N.Z,{className:"inline-block mr-2 h-4 w-4"}),"将相同类型的卡牌拖到目标区域，堆叠越多卡牌获得的分数越高！"]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-white flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-6 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full mr-2"}),"目标卡牌堆"]}),(0,a.jsx)("span",{className:"text-xs bg-black/30 px-2 py-1 rounded-full text-blue-300 backdrop-blur-sm",children:g?"已选择 ".concat(g.toUpperCase()," 类型卡牌"):"请选择一种卡牌类型作为目标"})]}),(0,a.jsx)(o,{cards:u,selectedType:g,isLocked:!1})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-white flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-6 bg-gradient-to-r from-red-500 to-orange-500 rounded-full mr-2"}),"垃圾桶"]}),(0,a.jsx)("span",{className:"text-xs bg-black/30 px-2 py-1 rounded-full text-orange-300 backdrop-blur-sm",children:"需要至少10张相同类型卡牌才能丢弃"})]}),(0,a.jsx)(f,{error:K,success:W})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-white flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-10 bg-gradient-to-r from-green-500 to-teal-500 rounded-full mr-2"}),"卡牌区域"]}),(0,a.jsx)(_,{children:(0,a.jsxs)(B,{children:[(0,a.jsx)(V,{asChild:!0,children:(0,a.jsxs)("button",{onClick:()=>{if(!t){b.ZP.error("请先连接钱包");return}H(!0),el(!0);let e=Number((null==eu?void 0:eu.totalBalance)||0)/1e9;if(M>=6){if(e<.2){b.ZP.error("余额不足，无法抽卡"),H(!1),el(!1);return}ec({wallet:null}).onSuccess(async e=>{console.log("付款成功",e),setTimeout(()=>{eN(),O(e=>e+1),H(!1),setTimeout(()=>el(!1),500)},1e3)}).onError(async e=>{console.log("付款失败",e),et.error(e.message),H(!1),el(!1)}).execute()}else setTimeout(()=>{eN(),O(e=>e+1),H(!1),setTimeout(()=>el(!1),500)},1e3)},disabled:A,className:"flex items-center gap-1 rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 px-4 py-2 text-sm font-medium text-white transition-all hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-600 disabled:to-gray-700 shadow-lg hover:shadow-blue-500/20 hover:scale-105",children:[A?(0,a.jsx)(w.Z,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(k.Z,{className:"h-4 w-4"}),"抽卡 ",M>=6?"(0.2 SUI)":"(".concat(6-M,"/6免费)")]})}),(0,a.jsx)(D,{className:"bg-black/80 border border-white/10 text-white",children:(0,a.jsx)("p",{children:"每日前6次抽卡免费，之后每次需要0.2 SUI"})})]})})]}),(0,a.jsx)(i.M,{children:ea&&(0,a.jsx)(d.E.div,{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsxs)(d.E.div,{className:"text-center",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.2,opacity:0},children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full animate-ping opacity-20"}),(0,a.jsx)("div",{className:"relative bg-gradient-to-r from-blue-600 to-purple-600 p-8 rounded-full shadow-lg shadow-blue-500/20",children:(0,a.jsx)(k.Z,{size:40,className:"text-white animate-spin"})})]}),(0,a.jsx)("p",{className:"mt-4 text-xl font-bold text-white",children:"抽取卡牌中..."})]})})}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-2",children:c.map(e=>(0,a.jsx)(x,{slot:e,isDisabled:A,selectedType:g},e.id))})]})]}),(0,a.jsx)(r.y9,{dropAnimation:ed,children:ek&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full animate-pulse opacity-30"}),(0,a.jsx)("img",{src:ek.image||"/placeholder.svg",alt:ek.type,className:"h-16 w-16 rounded-full border-2 border-green-400 bg-black/40 p-1 shadow-lg scale-110"})]})})]}),"playing"===s&&(0,a.jsx)("div",{className:"fixed bottom-6 left-1/2 z-50 -translate-x-1/2 transform",children:(0,a.jsx)(d.E.button,{onClick:()=>ew(u.length),disabled:0===u.length||A,whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-2 rounded-full bg-gradient-to-r from-green-500 to-emerald-600 px-8 py-3 font-medium text-white shadow-lg transition-all hover:from-green-600 hover:to-emerald-700 disabled:from-gray-500 disabled:to-gray-600 disabled:cursor-not-allowed",children:A?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.Z,{className:"h-5 w-5 animate-spin"}),(0,a.jsx)("span",{children:"处理中..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"提交成绩"}),u.length>0&&(0,a.jsxs)("span",{className:"ml-1 bg-white/20 px-2 py-0.5 rounded-full text-sm",children:[u.length,"张"]})]})})}),"submitted"===s&&(0,a.jsx)("div",{className:"flex h-[70vh] flex-col items-center justify-center",children:(0,a.jsxs)(d.E.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:15},className:"mb-8 rounded-2xl bg-gradient-to-b from-black/50 to-black/70 p-8 text-center backdrop-blur-md border border-white/10 shadow-lg shadow-purple-500/10 max-w-md w-full",children:[(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-yellow-500 rounded-full animate-ping opacity-10"}),(0,a.jsx)(j.Z,{className:"mx-auto h-20 w-20 text-yellow-400 drop-shadow-[0_0_10px_rgba(250,204,21,0.5)]"})]}),(0,a.jsx)("h2",{className:"mb-2 text-3xl font-bold text-white bg-gradient-to-r from-yellow-400 to-amber-500 bg-clip-text text-transparent",children:"提交成功!"}),(0,a.jsxs)("p",{className:"mb-6 text-xl text-gray-300",children:["您已成功提交 ",(0,a.jsx)("span",{className:"font-bold text-white",children:u.length})," 张",(0,a.jsx)("span",{className:"font-bold text-white ml-1",children:null==g?void 0:g.toUpperCase()})," 卡牌"]}),em&&(0,a.jsxs)("div",{className:"mb-6 space-y-3 text-left bg-black/30 p-4 rounded-xl border border-white/5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-300",children:"自己:"}),(0,a.jsx)("p",{className:"font-bold text-white bg-blue-500/20 px-2 py-0.5 rounded-md",children:(0,Z.T)(em.endPlayer)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-300",children:"自己奖励:"}),(0,a.jsxs)("p",{className:"font-bold text-green-400 bg-green-500/10 px-2 py-0.5 rounded-md flex items-center",children:[(0,a.jsx)(S.Z,{size:14,className:"mr-1"}),Number(em.endAmount)/1e9," SUI"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-300",children:"赢家:"}),(0,a.jsx)("p",{className:"font-bold text-white bg-purple-500/20 px-2 py-0.5 rounded-md",children:(0,Z.T)(em.ownPlayer)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-300",children:"赢家奖励:"}),(0,a.jsxs)("p",{className:"font-bold text-green-400 bg-green-500/10 px-2 py-0.5 rounded-md flex items-center",children:[(0,a.jsx)(S.Z,{size:14,className:"mr-1"}),Number(em.ownAmount)/1e9," SUI"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-300",children:"首位玩家:"}),(0,a.jsx)("p",{className:"font-bold text-white bg-amber-500/20 px-2 py-0.5 rounded-md",children:(0,Z.T)(em.firstPlayer)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-300",children:"首位奖励:"}),(0,a.jsxs)("p",{className:"font-bold text-green-400 bg-green-500/10 px-2 py-0.5 rounded-md flex items-center",children:[(0,a.jsx)(S.Z,{size:14,className:"mr-1"}),Number(em.firstAmount)/1e9," SUI"]})]})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)(z.default,{href:"/",children:(0,a.jsxs)(I,{variant:"outline",className:"bg-gray-800/80 text-white hover:bg-gray-700 border-white/10 rounded-full px-5 shadow-lg transition-all hover:scale-105",children:[(0,a.jsx)(y.Z,{size:16,className:"mr-2"}),"返回首页"]})}),(0,a.jsxs)(I,{onClick:()=>L(!0),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-full px-5 shadow-lg transition-all hover:scale-105",children:[(0,a.jsx)(j.Z,{size:16,className:"mr-2"}),"查看排行榜"]})]})]})}),(0,a.jsx)(T.Vq,{open:F,onOpenChange:$,children:(0,a.jsxs)(T.cZ,{className:"bg-gradient-to-b from-gray-900 to-black border-white/10 text-white rounded-xl shadow-xl max-w-md",children:[(0,a.jsxs)(T.fK,{children:[(0,a.jsx)(T.$N,{className:"text-xl bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"游戏规则"}),(0,a.jsx)(T.Be,{className:"text-gray-300",children:"TokenTown 堆堆乐游戏规则说明"})]}),(0,a.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,a.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg",children:[(0,a.jsxs)("h3",{className:"mb-2 font-medium text-blue-400 flex items-center",children:[(0,a.jsx)("div",{className:"w-1 h-4 bg-blue-400 rounded-full mr-2"}),"基本规则"]}),(0,a.jsxs)("ul",{className:"space-y-2 pl-4",children:[(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-blue-500/20 text-center text-xs leading-5 mr-2",children:"1"}),"初始获得30张卡牌分配至7个卡槽"]}),(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-blue-500/20 text-center text-xs leading-5 mr-2",children:"2"}),"从卡槽中选定一类卡牌为目标堆叠卡"]}),(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-blue-500/20 text-center text-xs leading-5 mr-2",children:"3"}),"只能将相同类型卡牌堆叠至目标卡槽"]}),(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-blue-500/20 text-center text-xs leading-5 mr-2",children:"4"}),"每日前6次抽卡免费，之后每次抽卡0.2 SUI"]})]}),(0,a.jsx)("h4",{className:"mt-3 mb-1 font-medium text-red-400 bg-red-500/10 p-2 rounded-lg",children:"结束之前，已经提交了的玩家可以再次提交哟（取最高成绩）"})]}),(0,a.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg",children:[(0,a.jsxs)("h3",{className:"mb-2 font-medium text-green-400 flex items-center",children:[(0,a.jsx)("div",{className:"w-1 h-4 bg-green-400 rounded-full mr-2"}),"奖励机制"]}),(0,a.jsxs)("ul",{className:"space-y-2 pl-4",children:[(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-green-500/20 text-center text-xs leading-5 mr-2",children:"1"}),"若当日有人付费抽卡，排名第1名玩家可获得金库一半的奖励"]}),(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-green-500/20 text-center text-xs leading-5 mr-2",children:"2"}),"若当日有人付费抽卡，作为激励最后提交者可获得1/6金库奖励"]}),(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-green-500/20 text-center text-xs leading-5 mr-2",children:"3"}),"第一位付费提交者可获得1/3金库奖励"]})]})]})]})]})}),(0,a.jsx)(T.Vq,{open:J,onOpenChange:L,children:(0,a.jsxs)(T.cZ,{className:"bg-gradient-to-b from-gray-900 to-black border-white/10 text-white rounded-xl shadow-xl max-w-2xl",children:[(0,a.jsx)(T.fK,{children:(0,a.jsxs)(T.$N,{className:"text-xl bg-gradient-to-r from-yellow-400 to-amber-400 bg-clip-text text-transparent flex items-center",children:[(0,a.jsx)(j.Z,{className:"mr-2 h-5 w-5 text-yellow-400"}),"今日排行榜"]})}),(0,a.jsx)(Y,{})]})})]})}function J(){let e=(0,R.t)();return(console.log(null==e?void 0:e.address,"当前账户"),e)?(0,a.jsx)($,{accountAddress:e.address}):(0,a.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:"请先连接钱包"})}function L(){return(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:"加载中..."}),children:(0,a.jsx)(J,{})})}},4655:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(7437),l=s(4323),r=s(2265);function n(){let e=[{src:"/wusdc.svg",width:60,height:60,className:"animate-float-slow"},{src:"/wbtc.svg",width:70,height:70,className:"animate-float-medium"},{src:"/wal.png",width:55,height:55,className:"animate-float-fast"},{src:"/cetus.png",width:50,height:50,className:"animate-float-slow"},{src:"/usdt.svg",width:65,height:65,className:"animate-float-medium"},{src:"/sui.svg",width:58,height:58,className:"animate-float-fast"},{src:"/navx.svg",width:62,height:62,className:"animate-float-slow"},{src:"/deep.svg",width:56,height:56,className:"animate-float-medium"},{src:"/fdusd.svg",width:60,height:60,className:"animate-float-slow"},{src:"/ns.svg",width:60,height:60,className:"animate-float-medium"},{src:"/blue.png",width:60,height:60,className:"animate-float-medium"},{src:"/scallop.png",width:60,height:60,className:"animate-float-slow"}],t=(0,r.useMemo)(()=>{let t=[];for(let s=0;s<24;s++){let r=e[s%e.length],n="".concat(100*Math.random(),"%"),i="".concat(100*Math.random(),"%"),d="".concat(5*Math.random(),"s"),c=.15+.2*Math.random();t.push((0,a.jsx)(l.E.img,{src:r.src,width:r.width,height:r.height,alt:"",className:"absolute ".concat(r.className," pointer-events-none"),style:{left:n,top:i,opacity:c,animationDelay:d,pointerEvents:"none",filter:"drop-shadow(0 0 8px rgba(255, 255, 255, 0.2))"},initial:{opacity:0,scale:0},animate:{opacity:c,scale:1},transition:{duration:1,delay:.1*s}},"bg-icon-".concat(s)))}return t},[]);return(0,a.jsx)("div",{className:"pointer-events-none",style:{zIndex:-1},children:t})}},6013:(e,t,s)=>{"use strict";s.d(t,{Zb:()=>n});var a=s(7437),l=s(2265),r=s(7440);let n=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l})});n.displayName="Card",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...l})}).displayName="CardHeader",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...l})}).displayName="CardTitle",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...l})}).displayName="CardDescription",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...l})}).displayName="CardContent",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...l})}).displayName="CardFooter"},837:(e,t,s)=>{"use strict";s.d(t,{$N:()=>u,Be:()=>h,Vq:()=>d,cZ:()=>m,fK:()=>x});var a=s(7437),l=s(2265),r=s(3784),n=s(4697),i=s(7440);let d=r.fC;r.xz;let c=r.h_;r.x8;let o=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l})});o.displayName=r.aV.displayName;let m=l.forwardRef((e,t)=>{let{className:s,children:l,...d}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(o,{}),(0,a.jsxs)(r.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...d,children:[l,(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=r.VY.displayName;let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};x.displayName="DialogHeader";let u=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...l})});u.displayName=r.Dx.displayName;let h=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...l})});h.displayName=r.dk.displayName},2267:(e,t,s)=>{"use strict";s.d(t,{Hi:()=>m,L5:()=>d,$:()=>c,vd:()=>x});var a=s(729),l=s(2788),r=s(2231),n=s(6047);let i={testnet:{Package:"0xaaa6f50dee638bb6056f137fe2336f1dc03b0fc5a38f2ddce014b72bfaea89d7",Vault:"0xecc00b51af1cc0da48d54488428502bf80a33df18182352fb4e0d64617448e89"},mainnet:{Package:"0x1111111111111111111111111111111111111111"}},d="testnet",{networkConfig:c,useNetworkVariables:o}=(0,r.mB)({testnet:{url:(0,a.I)("testnet"),variables:i.testnet},mainnet:{url:(0,a.I)("mainnet"),variables:i.mainnet}});function m(e){return t=>e(new n.Y,c[d].variables,t)}let x=new l.u({url:c[d].url})},5417:(e,t,s)=>{"use strict";s.d(t,{J4:()=>n,OQ:()=>m,RS:()=>o,XH:()=>i,cv:()=>d,zB:()=>c});var a=s(2267),l=s(2737),r=s.n(l);let n=async()=>{let e="".concat(a.$.testnet.variables.Package,"::card::PaymentEvent"),t=r()().startOf("day").unix(),s=r()().endOf("day").unix();for(let l of(await a.vd.queryEvents({query:{MoveEventType:e},limit:1,order:"descending"})).data){let e=Math.floor(Number(l.timestampMs)/1e3);if(e>=t&&e<=s)return l.parsedJson.amount/1e9}return 0},i=async()=>{let e="".concat(a.$.testnet.variables.Package,"::card::DailyLeaderboardEvent"),t=r()().startOf("day").unix(),s=r()().endOf("day").unix(),l=await a.vd.queryEvents({query:{MoveEventType:e},limit:100}),n=new Map;for(let e of l.data){let a=e.parsedJson,l=Math.floor(Number(e.timestampMs)/1e3);if(l>=t&&l<=s){let e=n.get(a.player);(!e||BigInt(a.card_count)>BigInt(e.card_count))&&n.set(a.player,a)}}return Array.from(n.values()).sort((e,t)=>Number(BigInt(t.card_count)-BigInt(e.card_count)))},d=async()=>{let e="".concat(a.$.testnet.variables.Package,"::card::FirstEvent"),t=r()().startOf("day").unix(),s=r()().endOf("day").unix();for(let l of(await a.vd.queryEvents({query:{MoveEventType:e},limit:1,order:"descending"})).data){let e=Math.floor(Number(l.timestampMs)/1e3);if(e>=t&&e<=s)return l.parsedJson.player}return null},c=async()=>{let e="".concat(a.$.testnet.variables.Package,"::card::IncentiveSubmitEvent"),t=r()().startOf("day").unix(),s=r()().endOf("day").unix();for(let l of(await a.vd.queryEvents({query:{MoveEventType:e},limit:1,order:"descending"})).data){let e=Math.floor(Number(l.timestampMs)/1e3);if(e>=t&&e<=s)return l.parsedJson}return null},o=(0,a.Hi)((e,t,s)=>{if(s.wallet)e.moveCall({target:"".concat(t.Package,"::card::payment"),arguments:[e.object(s.wallet),e.object(t.Vault)]});else{let[s]=e.splitCoins(e.gas,[e.pure.u64(2e8)]);e.moveCall({package:t.Package,module:"card",function:"payment",arguments:[s,e.object(t.Vault)]})}return e}),m=(0,a.Hi)((e,t,s)=>(e.moveCall({package:t.Package,module:"card",function:"submit",arguments:[e.pure.u64(Number(s.cardCount)),e.pure.u64(Number(s.time)),e.object(t.Vault)]}),e))},7440:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var a=s(4839),l=s(6164);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.m6)((0,a.W)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[279,108,206,394,130,215,744],()=>t(380)),_N_E=e.O()}]);