(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3455:(e,t,a)=>{Promise.resolve().then(a.bind(a,1996))},1996:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(7437),l=a(2265),n=a(4323),r=a(7138),i=a(2231),c=a(690),d=a(5016),o=a(8030);let m=(0,o.Z)("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),x=(0,o.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var u=a(3907),h=a(837),p=a(4655),f=a(5417);function g(){let e=(0,i.t)(),[t,a]=(0,l.useState)(!1),[o,g]=(0,l.useState)(!1),[b,N]=(0,l.useState)(0),[w,y]=(0,l.useState)(0),[j,v]=(0,l.useState)(!1),[k,E]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{E(!0);let e=async()=>{y((await (0,f.XH)()).length),E(!1)};(async()=>{let e=await (0,f.J4)();N(null!=e?e:0)})(),e()},[]),(0,s.jsxs)("div",{className:"relative h-screen w-full overflow-hidden bg-gradient-to-br from-[#1a1a2e] to-[#16213e]",children:[(0,s.jsx)("div",{className:"absolute inset-0 z-0",children:(0,s.jsx)(p.Z,{})}),(0,s.jsxs)("div",{className:"relative z-10 flex items-center justify-between p-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(n.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"TokenTown"})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("button",{onClick:()=>g(!0),className:"flex items-center gap-1 rounded-full bg-white/10 px-3 py-1.5 text-sm font-medium text-white backdrop-blur-sm transition-all hover:bg-white/20 hover:scale-105",children:[(0,s.jsx)(c.Z,{size:16}),(0,s.jsx)("span",{children:"游戏规则"})]}),(0,s.jsx)(i.NL,{})]})]}),(0,s.jsxs)("div",{className:"relative z-10 flex h-[calc(100vh-80px)] w-full flex-col items-center justify-center px-4",children:[(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8},className:"mb-8 text-center",children:[(0,s.jsxs)("h1",{className:"text-6xl font-bold text-white drop-shadow-glow",children:[(0,s.jsx)("span",{className:"bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",children:"Token"}),(0,s.jsx)("span",{className:"bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent",children:"Town"})]}),(0,s.jsx)("p",{className:"mt-2 text-lg text-[#a0aec0]",children:"区块链卡牌堆叠游戏"}),(0,s.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-2",children:[(0,s.jsxs)(n.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5},className:"flex items-center gap-1 rounded-full bg-gradient-to-r from-blue-500/20 to-purple-500/20 px-4 py-2 text-sm text-blue-300 border border-blue-500/20 shadow-lg shadow-blue-500/5",children:[(0,s.jsx)(d.Z,{size:16,className:"text-yellow-400"}),(0,s.jsxs)("span",{children:["今日奖池: ",(0,s.jsx)("span",{className:"font-bold text-white",children:b})," SUI"]})]}),(0,s.jsxs)(n.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.6},className:"flex items-center gap-1 rounded-full bg-gradient-to-r from-purple-500/20 to-pink-500/20 px-4 py-2 text-sm text-purple-300 border border-purple-500/20 shadow-lg shadow-purple-500/5",children:[(0,s.jsx)(m,{size:16,className:"text-yellow-400"}),(0,s.jsxs)("span",{children:["参与人数: ",(0,s.jsxs)("span",{className:"font-bold text-white",children:[w,"/5"]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,s.jsx)(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:e?1.05:1,boxShadow:e?"0 0 25px rgba(66, 153, 225, 0.6)":"none"},whileTap:{scale:e?.95:1},transition:{type:"spring",stiffness:400,damping:17},className:"relative overflow-hidden rounded-full px-16 py-4 font-bold text-white shadow-lg ".concat(e?"bg-gradient-to-r from-[#4DA2FF] to-[#0DC3A4]":"bg-gray-400/50 cursor-not-allowed"),onClick:()=>{e?w>=5&&v(!0):a(!0)},children:k?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent mr-2"}),(0,s.jsx)("span",{className:"relative z-10 text-xl",children:"加载中..."})]}):e?(0,s.jsxs)(r.default,{href:w<5?"/game":"#",className:"block w-full h-full",onClick:e=>w>=5&&e.preventDefault(),children:[(0,s.jsxs)("span",{className:"relative z-10 text-xl flex items-center",children:[w>=5?"今日已满":"开始游戏",(0,s.jsx)(x,{className:"ml-1 h-5 w-5"})]}),(0,s.jsx)("span",{className:"absolute inset-0 bg-gradient-to-r from-[#0DC3A4] to-[#4DA2FF] opacity-0 transition-opacity duration-300 hover:opacity-100"})]}):(0,s.jsxs)("span",{className:"relative z-10 text-xl flex items-center",children:[(0,s.jsx)(u.Z,{className:"mr-2 h-5 w-5"}),"连接钱包"]})}),(0,s.jsx)(h.Vq,{open:t,onOpenChange:a}),(0,s.jsx)(h.Vq,{open:j,onOpenChange:v,children:(0,s.jsxs)(h.cZ,{className:"bg-gradient-to-b from-gray-900 to-black border border-white/10 text-white rounded-xl",children:[(0,s.jsxs)(h.fK,{children:[(0,s.jsx)(h.$N,{className:"text-xl bg-gradient-to-r from-red-400 to-orange-400 bg-clip-text text-transparent",children:"每日限制"}),(0,s.jsx)(h.Be,{className:"text-gray-300",children:"游戏参与人数已达上限"})]}),(0,s.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,s.jsxs)("div",{className:"bg-red-500/10 p-4 rounded-lg border border-red-500/20",children:[(0,s.jsx)("p",{children:"今日游戏参与人数已达到5人上限，请明天再来参与！"}),(0,s.jsx)("p",{className:"mt-2",children:"您可以查看当前排行榜，了解今日游戏情况。"})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(r.default,{href:"/rankings",children:(0,s.jsxs)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 px-6 py-2 font-medium text-white shadow-lg",children:[(0,s.jsx)(d.Z,{size:16}),(0,s.jsx)("span",{children:"查看排行榜"})]})})})]})]})})]}),(0,s.jsx)(r.default,{href:"/rankings",className:"mt-6",children:(0,s.jsxs)(n.E.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},transition:{delay:.8,duration:.4},className:"flex items-center justify-center gap-2 rounded-full bg-white/10 px-8 py-3 font-medium text-white backdrop-blur-sm transition-all hover:bg-white/20 border border-white/5 shadow-lg",children:[(0,s.jsx)(d.Z,{size:20}),(0,s.jsx)("span",{children:"查看排行榜"})]})})]}),(0,s.jsx)(h.Vq,{open:o,onOpenChange:g,children:(0,s.jsxs)(h.cZ,{className:"bg-gradient-to-b from-gray-900 to-black border-white/10 text-white rounded-xl shadow-xl max-w-md",children:[(0,s.jsxs)(h.fK,{children:[(0,s.jsx)(h.$N,{className:"text-xl bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"游戏规则"}),(0,s.jsx)(h.Be,{className:"text-gray-300",children:"TokenTown 堆堆乐游戏规则说明"})]}),(0,s.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,s.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg",children:[(0,s.jsxs)("h3",{className:"mb-2 font-medium text-blue-400 flex items-center",children:[(0,s.jsx)("div",{className:"w-1 h-4 bg-blue-400 rounded-full mr-2"}),"基本规则"]}),(0,s.jsxs)("ul",{className:"space-y-2 pl-4",children:[(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-blue-500/20 text-center text-xs leading-5 mr-2",children:"1"}),"初始获得30张卡牌分配至7个卡槽"]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-blue-500/20 text-center text-xs leading-5 mr-2",children:"2"}),"从卡槽中选定一类卡牌为目标堆叠卡"]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-blue-500/20 text-center text-xs leading-5 mr-2",children:"3"}),"只能将相同类型卡牌堆叠至目标卡槽"]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-blue-500/20 text-center text-xs leading-5 mr-2",children:"4"}),"每日前6次抽卡免费，之后每次抽卡0.2 SUI"]})]}),(0,s.jsx)("h4",{className:"mt-3 mb-1 font-medium text-red-400 bg-red-500/10 p-2 rounded-lg",children:"结束之前，已经提交了的玩家可以再次提交哟（取最高成绩）"})]}),(0,s.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg",children:[(0,s.jsxs)("h3",{className:"mb-2 font-medium text-green-400 flex items-center",children:[(0,s.jsx)("div",{className:"w-1 h-4 bg-green-400 rounded-full mr-2"}),"奖励机制"]}),(0,s.jsxs)("ul",{className:"space-y-2 pl-4",children:[(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-green-500/20 text-center text-xs leading-5 mr-2",children:"1"}),"若当日有人付费抽卡，排名第1名玩家可获得金库一半的奖励"]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-green-500/20 text-center text-xs leading-5 mr-2",children:"2"}),"若当日有人付费抽卡，作为激励最后提交者可获得1/6金库奖励"]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"inline-block w-5 h-5 rounded-full bg-green-500/20 text-center text-xs leading-5 mr-2",children:"3"}),"第一位付费提交者可获得1/3金库奖励"]})]})]})]})]})})]})}},4655:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(7437),l=a(4323),n=a(2265);function r(){let e=[{src:"/wusdc.svg",width:60,height:60,className:"animate-float-slow"},{src:"/wbtc.svg",width:70,height:70,className:"animate-float-medium"},{src:"/wal.png",width:55,height:55,className:"animate-float-fast"},{src:"/cetus.png",width:50,height:50,className:"animate-float-slow"},{src:"/usdt.svg",width:65,height:65,className:"animate-float-medium"},{src:"/sui.svg",width:58,height:58,className:"animate-float-fast"},{src:"/navx.svg",width:62,height:62,className:"animate-float-slow"},{src:"/deep.svg",width:56,height:56,className:"animate-float-medium"},{src:"/fdusd.svg",width:60,height:60,className:"animate-float-slow"},{src:"/ns.svg",width:60,height:60,className:"animate-float-medium"},{src:"/blue.png",width:60,height:60,className:"animate-float-medium"},{src:"/scallop.png",width:60,height:60,className:"animate-float-slow"}],t=(0,n.useMemo)(()=>{let t=[];for(let a=0;a<24;a++){let n=e[a%e.length],r="".concat(100*Math.random(),"%"),i="".concat(100*Math.random(),"%"),c="".concat(5*Math.random(),"s"),d=.15+.2*Math.random();t.push((0,s.jsx)(l.E.img,{src:n.src,width:n.width,height:n.height,alt:"",className:"absolute ".concat(n.className," pointer-events-none"),style:{left:r,top:i,opacity:d,animationDelay:c,pointerEvents:"none",filter:"drop-shadow(0 0 8px rgba(255, 255, 255, 0.2))"},initial:{opacity:0,scale:0},animate:{opacity:d,scale:1},transition:{duration:1,delay:.1*a}},"bg-icon-".concat(a)))}return t},[]);return(0,s.jsx)("div",{className:"pointer-events-none",style:{zIndex:-1},children:t})}},837:(e,t,a)=>{"use strict";a.d(t,{$N:()=>u,Be:()=>h,Vq:()=>c,cZ:()=>m,fK:()=>x});var s=a(7437),l=a(2265),n=a(3784),r=a(4697),i=a(7440);let c=n.fC;n.xz;let d=n.h_;n.x8;let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(n.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});o.displayName=n.aV.displayName;let m=l.forwardRef((e,t)=>{let{className:a,children:l,...c}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(o,{}),(0,s.jsxs)(n.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[l,(0,s.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(r.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName;let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};x.displayName="DialogHeader";let u=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(n.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});u.displayName=n.Dx.displayName;let h=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(n.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...l})});h.displayName=n.dk.displayName},2267:(e,t,a)=>{"use strict";a.d(t,{Hi:()=>m,L5:()=>c,$:()=>d,vd:()=>x});var s=a(729),l=a(2788),n=a(2231),r=a(6047);let i={testnet:{Package:"0xaaa6f50dee638bb6056f137fe2336f1dc03b0fc5a38f2ddce014b72bfaea89d7",Vault:"0xecc00b51af1cc0da48d54488428502bf80a33df18182352fb4e0d64617448e89"},mainnet:{Package:"0x1111111111111111111111111111111111111111"}},c="testnet",{networkConfig:d,useNetworkVariables:o}=(0,n.mB)({testnet:{url:(0,s.I)("testnet"),variables:i.testnet},mainnet:{url:(0,s.I)("mainnet"),variables:i.mainnet}});function m(e){return t=>e(new r.Y,d[c].variables,t)}let x=new l.u({url:d[c].url})},5417:(e,t,a)=>{"use strict";a.d(t,{J4:()=>r,OQ:()=>m,RS:()=>o,XH:()=>i,cv:()=>c,zB:()=>d});var s=a(2267),l=a(2737),n=a.n(l);let r=async()=>{let e="".concat(s.$.testnet.variables.Package,"::card::PaymentEvent"),t=n()().startOf("day").unix(),a=n()().endOf("day").unix();for(let l of(await s.vd.queryEvents({query:{MoveEventType:e},limit:1,order:"descending"})).data){let e=Math.floor(Number(l.timestampMs)/1e3);if(e>=t&&e<=a)return l.parsedJson.amount/1e9}return 0},i=async()=>{let e="".concat(s.$.testnet.variables.Package,"::card::DailyLeaderboardEvent"),t=n()().startOf("day").unix(),a=n()().endOf("day").unix(),l=await s.vd.queryEvents({query:{MoveEventType:e},limit:100}),r=new Map;for(let e of l.data){let s=e.parsedJson,l=Math.floor(Number(e.timestampMs)/1e3);if(l>=t&&l<=a){let e=r.get(s.player);(!e||BigInt(s.card_count)>BigInt(e.card_count))&&r.set(s.player,s)}}return Array.from(r.values()).sort((e,t)=>Number(BigInt(t.card_count)-BigInt(e.card_count)))},c=async()=>{let e="".concat(s.$.testnet.variables.Package,"::card::FirstEvent"),t=n()().startOf("day").unix(),a=n()().endOf("day").unix();for(let l of(await s.vd.queryEvents({query:{MoveEventType:e},limit:1,order:"descending"})).data){let e=Math.floor(Number(l.timestampMs)/1e3);if(e>=t&&e<=a)return l.parsedJson.player}return null},d=async()=>{let e="".concat(s.$.testnet.variables.Package,"::card::IncentiveSubmitEvent"),t=n()().startOf("day").unix(),a=n()().endOf("day").unix();for(let l of(await s.vd.queryEvents({query:{MoveEventType:e},limit:1,order:"descending"})).data){let e=Math.floor(Number(l.timestampMs)/1e3);if(e>=t&&e<=a)return l.parsedJson}return null},o=(0,s.Hi)((e,t,a)=>{if(a.wallet)e.moveCall({target:"".concat(t.Package,"::card::payment"),arguments:[e.object(a.wallet),e.object(t.Vault)]});else{let[a]=e.splitCoins(e.gas,[e.pure.u64(2e8)]);e.moveCall({package:t.Package,module:"card",function:"payment",arguments:[a,e.object(t.Vault)]})}return e}),m=(0,s.Hi)((e,t,a)=>(e.moveCall({package:t.Package,module:"card",function:"submit",arguments:[e.pure.u64(Number(a.cardCount)),e.pure.u64(Number(a.time)),e.object(t.Vault)]}),e))},7440:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(4839),l=a(6164);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.m6)((0,s.W)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[279,108,206,130,215,744],()=>t(3455)),_N_E=e.O()}]);